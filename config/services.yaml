services:
  _defaults:
    autowire: true
    autoconfigure: true

  # Interface pour les générateurs d'ID
  MdavidDev\SymfonyCorrelationIdBundle\Service\Generator\CorrelationIdGeneratorInterface:
    class: MdavidDev\SymfonyCorrelationIdBundle\Service\Generator\UuidV4Generator

  # Générateur UUID v4 (par défaut)
  MdavidDev\SymfonyCorrelationIdBundle\Service\Generator\UuidV4Generator: ~

  # Service de stockage de l'ID de corrélation
  MdavidDev\SymfonyCorrelationIdBundle\Service\CorrelationIdStorage:
    arguments:
      $requestStack: '@request_stack'

  # Validateur d'ID de corrélation
  MdavidDev\SymfonyCorrelationIdBundle\Validator\CorrelationIdValidator:
    arguments:
      $enabled: '%correlation_id.validation.enabled%'
      $maxLength: '%correlation_id.validation.max_length%'
      $pattern: '%correlation_id.validation.pattern%'